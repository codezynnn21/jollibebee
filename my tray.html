<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Jollibee Tray</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #fff0e6;
      margin: 0;
      padding: 20px;
      color: #d84315;
    }

    h1 {
      text-align: center;
      margin-bottom: 30px;
      color: #f06292;
    }

    .tray-container {
      max-width: 700px;
      margin: 0 auto;
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(216, 67, 21, 0.3);
      padding: 20px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 20px;
    }

    thead {
      background-color: #f8bbd0;
    }

    th, td {
      padding: 12px 10px;
      text-align: center;
      border-bottom: 1px solid #eee;
    }

    th {
      color: #d84315;
      font-weight: 700;
    }

    tbody tr:hover {
      background-color: #fff0f5;
    }

    .item-name {
      text-align: left;
      font-weight: 600;
    }

    .quantity-controls button {
      background: #d84315;
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 700;
      margin: 0 5px;
    }

    .quantity-controls button:hover {
      background: #b13611;
    }

    .remove-btn {
      background: transparent;
      border: none;
      color: #d84315;
      font-weight: 700;
      cursor: pointer;
      font-size: 18px;
    }

    .remove-btn:hover {
      color: #b13611;
    }

    .total-container {
      text-align: right;
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 20px;
    }

    .checkout-btn {
      background-color: #d84315;
      color: white;
      border: none;
      padding: 14px 30px;
      border-radius: 30px;
      font-size: 18px;
      cursor: pointer;
      display: block;
      margin: 0 auto;
      font-weight: 700;
      transition: background-color 0.3s ease;
    }

    .checkout-btn:hover {
      background-color: #b13611;
    }

    @media (max-width: 600px) {
      th, td {
        font-size: 14px;
        padding: 8px 5px;
      }

      .quantity-controls button {
        padding: 4px 8px;
        margin: 0 2px;
      }

      .checkout-btn {
        width: 100%;
      }
    }
  </style>
</head>
<body>

  <h1>Jollibee Tray</h1>
  <div class="tray-container">
    <table>
      <thead>
        <tr>
          <th>Meal</th>
          <th>Qty</th>
          <th>Price</th>
          <th>Total</th>
          <th>Remove</th>
        </tr>
      </thead>
      <tbody id="tray-body">
        <!-- Items will be inserted here -->
      </tbody>
    </table>

    <div class="total-container" id="tray-total">
      Total: ₱0.00
    </div>

    <button class="checkout-btn" id="checkout-btn" disabled>Checkout</button>
  </div>

  <script>
    // Sample tray data - in real case, this would come from previous orders or localStorage
    let trayItems = [
      { id: 1, name: '1pc Chickenjoy', price: 99, qty: 2 },
      { id: 2, name: 'Jolly Spaghetti', price: 89, qty: 1 },
      { id: 3, name: 'Yum Burger', price: 65, qty: 3 }
    ];

    const trayBody = document.getElementById('tray-body');
    const trayTotal = document.getElementById('tray-total');
    const checkoutBtn = document.getElementById('checkout-btn');

    function renderTray() {
      trayBody.innerHTML = '';

      if (trayItems.length === 0) {
        trayBody.innerHTML = `<tr><td colspan="5">Your tray is empty.</td></tr>`;
        trayTotal.textContent = 'Total: ₱0.00';
        checkoutBtn.disabled = true;
        return;
      }

      let total = 0;

      trayItems.forEach(item => {
        const itemTotal = item.price * item.qty;
        total += itemTotal;

        const tr = document.createElement('tr');

        // Meal Name
        const tdName = document.createElement('td');
        tdName.className = 'item-name';
        tdName.textContent = item.name;
        tr.appendChild(tdName);

        // Quantity with controls
        const tdQty = document.createElement('td');
        tdQty.className = 'quantity-controls';

        const btnMinus = document.createElement('button');
        btnMinus.textContent = '-';
        btnMinus.title = 'Decrease quantity';
        btnMinus.onclick = () => updateQty(item.id, item.qty - 1);

        const qtySpan = document.createElement('span');
        qtySpan.textContent = item.qty;
        qtySpan.style.margin = '0 8px';

        const btnPlus = document.createElement('button');
        btnPlus.textContent = '+';
        btnPlus.title = 'Increase quantity';
        btnPlus.onclick = () => updateQty(item.id, item.qty + 1);

        tdQty.appendChild(btnMinus);
        tdQty.appendChild(qtySpan);
        tdQty.appendChild(btnPlus);
        tr.appendChild(tdQty);

        // Price
        const tdPrice = document.createElement('td');
        tdPrice.textContent = `₱${item.price.toFixed(2)}`;
        tr.appendChild(tdPrice);

        // Total
        const tdTotal = document.createElement('td');
        tdTotal.textContent = `₱${itemTotal.toFixed(2)}`;
        tr.appendChild(tdTotal);

        // Remove button
        const tdRemove = document.createElement('td');
        const removeBtn = document.createElement('button');
        removeBtn.className = 'remove-btn';
        removeBtn.title = 'Remove item';
        removeBtn.innerHTML = '&times;';
        removeBtn.onclick = () => removeItem(item.id);
        tdRemove.appendChild(removeBtn);
        tr.appendChild(tdRemove);

        trayBody.appendChild(tr);
      });

      trayTotal.textContent = `Total: ₱${total.toFixed(2)}`;
      checkoutBtn.disabled = false;
    }

    function updateQty(id, newQty) {
      if (newQty < 1) return; // Minimum 1 quantity
      const item = trayItems.find(i => i.id === id);
      if (item) {
        item.qty = newQty;
        renderTray();
      }
    }

    function removeItem(id) {
      trayItems = trayItems.filter(i => i.id !== id);
      renderTray();
    }

    checkoutBtn.addEventListener('click', () => {
      if (trayItems.length === 0) return;
      let summary = 'Your Order Summary:\n\n';
      let total = 0;
      trayItems.forEach(item => {
        summary += `${item.name} x${item.qty} = ₱${(item.price * item.qty).toFixed(2)}\n`;
        total += item.price * item.qty;
      });
      summary += `\nTotal: ₱${total.toFixed(2)}\n\nThank you for ordering with Jollibee!`;
      alert(summary);

      function checkout() {
  if (cart.length === 0) return;

  let summary = 'Order Summary:\n\n';
  let total = 0;

  cart.forEach(item => {
    summary += `${item.name} x${item.qty} = ₱${(item.qty * item.price).toFixed(2)}\n`;
    total += item.price * item.qty;
  });

  summary += `\nTotal: ₱${total.toFixed(2)}\n\nThank you for your order!`;

  // Encode the summary to be URL safe
  const encodedSummary = encodeURIComponent(summary);

  // Redirect to checkout.html and pass summary as query param
  window.location.href = `checkout .html?summary=${encodedSummary}`;
}

      
      // Clear tray after checkout
      trayItems = [];
      renderTray();
    });

    renderTray();
  </script>
</body>
</html>
